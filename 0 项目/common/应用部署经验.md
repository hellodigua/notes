## pm2 服务开机自启动

1. 首先需要启动相关的 pm2 应用

2. 执行`sudo pm2 save` 保存当前已启动服务

3. 执行`sudo pm2 startup` 设置开机自启的配置

4. 执行`sudo pm2 save` 保存上一步的设置

5. 重启系统试一下：如果不行执行

`chattr +i /home/XXX/.pm2/dump.pm2` 之后再试一下

## mongoDB 开机自启动

1. `cd /etc/init.d/`

2. 创建自启文件 `sudo touch start_mongodb`

3. 写入配置并保存

```
#!/bin/bash
### BEGIN INIT INFO
# Provides:          yxk
# Required-start:    $local_fs $remote_fs $network $syslog
# Required-Stop:     $local_fs $remote_fs $network $syslog
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description:
# Description:
### END INIT INFO

service mongod start
```

4. 增加权限

`sudo chmod 777 start_mongodb`

5. 设置开机自启动

`sudo update-rc.d start_mongodb defaults`

6. 也可以关闭开机自启动

`sudo update-rc.d start_mongodb remove`
